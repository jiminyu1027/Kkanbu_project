<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="edu.study.mapper.CartMapper">
		<!-- 카트 담기 -->
  	<insert id="insert" parameterType="CartVO">
  		INSERT INTO cart (ctidx, mId, midx, pidx, amount)
  		VALUES (ctidx_seq.nextval, #{mId}, #{midx}, #{pidx}, #{amount})
  	</insert> 
  	
  	<!-- 합계 -->
  	<select id="sum">
	  	SELECT sum(to_number(replace(p.pprice,',',''))) 
		  FROM cart c, product p 
		 WHERE c.pidx = p.pidx and c.midx=#{c.midx};
  	</select>
</mapper>